<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Grafy reprezentované maticami incidencií v Jave | robonovotny</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="http://novotnyr.github.io/asciidoctor.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body);
        });
    </script>

<header>

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="http://novotnyr.github.io/">/home/robonovotny</a>
      </li>
      

      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">Grafy reprezentované maticami incidencií v Jave</span></h1>

<h2 class="date">2008/05/13</h2>
<p class="terms">
  
  
  
  
  
</p>
</div>



<main>


<h1 id="matica-incidencií">Matica incidencií</h1>

<p>V minulom príklade pre topologické triedenie sme používali vlastnú dátovú štruktúru,
ktorá umožňovala jednoduché a efektívne vykonávanie operácií nad grafom (hľadanie
uzla bez predchodcov, hľadanie nasledovníkov). <em>Graf</em> ako matematická
štruktúra má ešte niekoľko ďalších spôsobov reprezentácie v programovacích jazykoch.</p>

<p>Jednou z možností je použitie <em>matice incidencie</em>, čo je tabuľka s <em>n</em> riadkami
a stĺpcami (kde <em>n</em> je počet uzlov v grafe). Prvok v <em>r</em>-tom riadku a <em>s</em>-tom
stĺpci má hodnotu 1, ak v grafe existuje <em>hrana</em> (teda prepojenie) medzi
<em>r</em>-tým a <em>s</em>-tým uzlom.</p>

<p><img src="topsort.png" alt="" /></p>

<p>Matica incidencie pre graf na obrázku má 10 riadkov a 10 stĺpcov.</p>

<table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>9</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>10</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>Na obrázku máme napr. hranu z uzla 1 do uzla 2, preto v matici incidencie
dáme na 1. riadok a 2. stĺpec značku (napr. <em>X</em>).
Ďalšia hrana je medzi uzlom 2. a 4., čiže v 2. riadku a 4. stĺpci je
značka.
Týmto spôsobom pokračujeme až kým nevyplníme celú maticu:</p>

<table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>

<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
</tr>

<tr>
<td>6</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
</tr>

<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>9</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>

<tr>
<td>10</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>Na tejto matici vieme potom vykonávať rôzne operácie zodpovedajúce
veciam, ktoré chceme z grafu zistiť, či ukázať.</p>

<h2 id="nasledovníci-uzla">Nasledovníci uzla</h2>

<p><em>Počet nasledovníkov uzla</em> vieme zistiť podľa počtu značiek v riadku zodpovedajúcom
danému uzlu.</p>

<p><em>Konkrétnych nasledovníkov uzla</em> zistíme tak, že sa pozrieme do riadku
zodpovedajúcemu danému uzlu a tie stĺpce, v ktorých je značka, zodpovedajú
uzlom nasledovníkov. Potom je jasné, že <em>uzol bez nasledovníkov</em> má zodpovedajúci riadok prázdny.</p>

<p>V nasledovnej tabuľke nemajú uzly 8 a 10 žiadnych nasledovníkov, uzol
s 1 má dvoch nasledovníkov (2 a 3).</p>

<h2 id="predchodcovia-uzla">Predchodcovia uzla</h2>

<p>Ak chceme zistiť <em>počet predchodcov uzla</em>, pozrieme sa na počet značiek v stĺpci zodpovedajúcom
danému uzlu. <em>Konkrétnych predchodcov uzla</em> zistíme pohľadom do stĺpca
zodpovedajúcemu danému uzlu a riadky, v ktorých je značka, zodpovedajú
predchodcom. <em>Uzol bez predchodcov</em> má zodpovedajúci stĺpec prázdny.</p>

<p>V nasledovnej tabuľke nemajú uzly 1 a 7 žiadnych nasledovníkov, uzol
3 má dvoch predchodcov (1 a 6).</p>

<h2 id="pridanie-uzla-do-grafu">Pridanie uzla do grafu</h2>

<p>Ak chceme pridať uzol grafu, znamená to pridanie nového
riadka a stĺpca do matice.</p>

<table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>.</td>
</tr>

<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>6</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>9</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>.</td>
</tr>

<tr>
<td>10</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td>.</td>
</tr>

<tr>
<td>11</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
<td>.</td>
</tr>
</tbody>
</table>

<h2 id="odobratie-uzla-z-grafu">Odobratie uzla z grafu</h2>

<p>Odobratie uzla z grafu znamená odstránenie príslušného
riadka a stĺpca z matice. S odstránením uzla sa
samozrejme odstránia aj hrany vychádzajúce a vchádzajúce
do uzla.</p>

<p>Ak odstránime uzol 6, matica sa nám zmenší o jeden riadok
a jeden stĺpec.</p>

<table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th align="center">6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
</tr>

<tr>
<td>6</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td align="center">+</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td>&mdash;</td>
<td>&mdash;</td>
</tr>

<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>

<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>9</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>10</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td align="center">|</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>

<h2 id="pridanie-hrany-do-grafu">Pridanie hrany do grafu</h2>

<p>Pridanie hrany medzi dvoma uzlami <em>X</em> a <em>Y</em>
znamená nastavenie značky v <em>X</em>-tom riadku a <em>Y</em>-tom
stĺpci.</p>

<h2 id="odobratie-hrany-z-grafu">Odobratie hrany z grafu</h2>

<p>Odobratie hrany medzi dvoma uzlami <em>X</em> a <em>Y</em>
znamená zrušenie značky v <em>X</em>-tom riadku a <em>Y</em>-tom
stĺpci.</p>

<h1 id="implementácia-v-jave">Implementácia v Jave</h1>

<p>Implementácia grafu založeného na matici incidencií v Jave
je založená na dvoch triedach: uzle a grafe.</p>

<p>Uzol <code>Uzol</code> je jednoduchá trieda - uzol je charakterizovaný
svojim popiskom.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">class</span> Uzol {
  <span style="color:#289;font-weight:bold">private</span> <span style="color:#5ed;font-weight:bold">String</span> label;

  <span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">Uzol</span>(String <span style="color:#5ed;font-weight:bold">label</span>) {
    <span style="color:#289;font-weight:bold">super</span>();
    <span style="color:#289;font-weight:bold">this</span>.<span style="color:#007">label</span> <span style="color:#333">=</span> label;
  }

  <span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">String</span> getLabel() {
    <span style="color:#289;font-weight:bold">return</span> label;
  }

  <span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">void</span> setLabel(String <span style="color:#5ed;font-weight:bold">label</span>) {
    <span style="color:#289;font-weight:bold">this</span>.<span style="color:#007">label</span> <span style="color:#333">=</span> label;
  }
}</code></pre></div>
<p>Samotný graf, v tomto prípade s názvom <code>IncidenceMatrix</code>,
triedou obaľujúcou maticu incidencií a poskytujúcou metódy na prácu s ňou.</p>

<p>Maticu môžeme reprezentovať ako zoznamom zoznamov, inak povedané
ako objektom typu <code>List&lt;List&lt;Boolean&gt;</code>. Tento zoznam si možno
predstaviť ako zoznam riadkov v matici, kde každý riadok predstavuje
samostatný zoznam booleovských položiek.</p>

<p>Okrem toho budeme v triede udržiavať samostatný zoznam objektov <code>Uzol</code>.
Objekt typu <code>Uzol</code> v tomto zozname sa nachádza na nejakom indexe.
Napr. desiaty uzol má index 9 a v matici incidencií mu zodpovedá
zoznam s indexom 9, resp. prvky v zoznamoch s indexom 9.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">class</span> IncidenceMatrix {
  <span style="color:#289;font-weight:bold">private</span> <span style="color:#5ed;font-weight:bold">List</span><span style="color:#333">&lt;</span>List<span style="color:#333">&lt;</span>Boolean<span style="color:#333">&gt;&gt;</span> <span style="color:#5ed;font-weight:bold">matica</span> <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">new</span> ArrayList<span style="color:#333">&lt;</span>List<span style="color:#333">&lt;</span>Integer<span style="color:#333">&gt;&gt;</span>();

  <span style="color:#289;font-weight:bold">private</span> <span style="color:#5ed;font-weight:bold">List</span><span style="color:#333">&lt;</span>Uzol<span style="color:#333">&gt;</span> <span style="color:#5ed;font-weight:bold">uzly</span> <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">new</span> ArrayList<span style="color:#333">&lt;</span>Uzol<span style="color:#333">&gt;</span>();</code></pre></div>
<h2 id="pridanie-uzla-do-grafu-1">Pridanie uzla do grafu</h2>

<p>Ako sme spomínali vyššie, pridanie uzla do grafu zodpovedá pridaniu
nového riadka a nového stĺpca. Ako sa to prejaví v prípade zoznamu zoznamov?
Rozdeľme si túto operáciu na dva (plus jeden) kroky:</p>

<ol>
<li>každý z existujúcich zoznamov predĺžime o jeden prvok - tým pridáme do matice jeden „stĺpec&rdquo;.</li>
</ol>

<p><img src="pridanie-prvku1.png" alt="" /></p>

<ol>
<li>do zoznamu zoznamov pridáme nový zoznam (zodpovedajúci novému riadku), ktorý má dĺžku rovnú aktuálnemu počtu uzlov + 1. (Ak pridávame do matice desiaty uzol, nový zoznam musí mať dĺžku 9 + 1, teda 10.) V každom prvku bude <code>false</code>.</li>
</ol>

<p><img src="pridanie-prvku2.png" alt="" /></p>

<ol>
<li>do zoznamu uzlov pridajme nový prvok zodpovedajúci aktuálne pridávanému uzlu.</li>
</ol>

<p>Tomu zodpovedá metóda <code>pridajUzol()</code>, ktorou pridáme uzol do grafu.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">void</span> pridajUzol(Uzol <span style="color:#5ed;font-weight:bold">uzol</span>) {
  <span style="color:#666;font-style:italic">// na koniec kazdeho zoznamu prida *false*
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">for</span>(List<span style="color:#333">&lt;</span>Boolean<span style="color:#333">&gt;</span> <span style="color:#5ed;font-weight:bold">matica</span> <span style="color:#333">:</span> matica) {
    matica.<span style="color:#007">add</span>(<span style="color:#289;font-weight:bold">false</span>);
  }

  <span style="color:#666;font-style:italic">// prida novy zoznam dlzky pocetUzlov + 1 naplneny *false*
</span><span style="color:#666;font-style:italic"></span>  List<span style="color:#333">&lt;</span>Boolean<span style="color:#333">&gt;</span> <span style="color:#5ed;font-weight:bold">riadok</span> <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">new</span> ArrayList<span style="color:#333">&lt;</span>Boolean<span style="color:#333">&gt;</span>();
  <span style="color:#289;font-weight:bold">for</span>(<span style="color:#66f;font-weight:bold">int</span> <span style="color:#5ed;font-weight:bold">i</span> <span style="color:#333">=</span> 0; i <span style="color:#333">&lt;</span> uzly.<span style="color:#007">size</span>() <span style="color:#333">+</span> 1; i<span style="color:#333">++</span>) {
    riadok.<span style="color:#007">add</span>(<span style="color:#289;font-weight:bold">false</span>);
  }   
  matica.<span style="color:#007">add</span>(riadok);
  <span style="color:#666;font-style:italic">// prida uzol do zoznamu uzlov
</span><span style="color:#666;font-style:italic"></span>  uzly.<span style="color:#007">add</span>(uzol);
}</code></pre></div>
<h2 id="odstránenie-uzla-z-grafu">Odstránenie uzla z grafu</h2>

<p>Odstránenie uzla je opačnou operáciou aj v zmysle vykonaných činností.
Pre daný uzol si zistíme jeho index (na to použijeme metódu <code>indexOf()</code>
na zozname <code>java.util.List</code>, ktorá vráti index prvého výskytu daného
objektu v ňom) <em>k</em>. Z matice potom odstránime <em>k</em>-ty zoznam
a z každého zoznamu odstránime <em>k</em>-ty prvok.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">protected</span> <span style="color:#5ed;font-weight:bold">void</span> odstráňUzol(Uzol <span style="color:#5ed;font-weight:bold">node</span>) {
  <span style="color:#666;font-style:italic">// zisti index daného uzla
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#66f;font-weight:bold">int</span> <span style="color:#5ed;font-weight:bold">index</span> <span style="color:#333">=</span> uzly.<span style="color:#007">indexOf</span>(node);
  <span style="color:#289;font-weight:bold">if</span>(index <span style="color:#333">==</span> <span style="color:#333">-</span>1) {
    <span style="color:#666;font-style:italic">// taký uzol nejestvuje, nerobíme nič
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#289;font-weight:bold">return</span>;
  }
  <span style="color:#666;font-style:italic">// z matice odstránime príslušný zoznam  
</span><span style="color:#666;font-style:italic"></span>  matica.<span style="color:#007">remove</span>(index);
  <span style="color:#666;font-style:italic">// z každého riadka v matici odstránime príslušnú bunku
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">for</span> (List<span style="color:#333">&lt;</span>Integer<span style="color:#333">&gt;</span> <span style="color:#5ed;font-weight:bold">matica</span> <span style="color:#333">:</span> matica) {
    matica.<span style="color:#007">remove</span>(index);
  }
  <span style="color:#666;font-style:italic">// zo zoznamu uzlov vyhodíme daný uzol
</span><span style="color:#666;font-style:italic"></span>  uzly.<span style="color:#007">remove</span>(node);
}</code></pre></div>
<h2 id="pridanie-hrany-do-grafu-1">Pridanie hrany do grafu</h2>

<p>Ďalšou užitočnou operáciou je pridanie hrany medzi dvoma uzlami. V grafickom
znázornení to zodpovedá natiahnutiu čiary medzi dvoma „guličkami&rdquo;. Ak
máme v grafe dva existujúce uzly <em>C</em> a <em>F</em>, stačí nájsť
v zozname uzlov ich zodpovedajúce indexy. Ak má uzol <em>C</em>
index 5 a uzol <em>F</em> index 8, hrana medzi uzlami znamená
nastavenie značky v riadku s indexom 5 na pozícii osem. To je samozrejme
v prípade, že hrany sú orientované - čiže môžeme prejsť z <em>C</em>
do <em>F</em>, ale nie naopak. Ak máme neorientované hrany,
musíme ju nastaviť aj v opačnom smere, teda aj na riadku s indexom
osem na prvku s pozíciou 5.</p>

<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>

<tbody>
<tr>
<td>0</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>1</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>

<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
</tr>

<tr>
<td>6</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
</tr>

<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>9</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>

<p>Metóda vyzerá nasledovne:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">void</span> pridajHranu(Uzol <span style="color:#5ed;font-weight:bold">node1</span>, Uzol <span style="color:#5ed;font-weight:bold">node2</span>) {
  <span style="color:#666;font-style:italic">// zistíme index prvého uzla
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#66f;font-weight:bold">int</span> <span style="color:#5ed;font-weight:bold">index1</span> <span style="color:#333">=</span> uzly.<span style="color:#007">indexOf</span>(node1);
  <span style="color:#289;font-weight:bold">if</span>(index1 <span style="color:#333">==</span> <span style="color:#333">-</span>1) {
    <span style="color:#666;font-style:italic">// taký uzol neexistuje!
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#289;font-weight:bold">throw</span> <span style="color:#289;font-weight:bold">new</span> IllegalArgumentException(<span style="background-color:#e0e0ff">&#34;Uzol v grafe neexistuje! &#34;</span> <span style="color:#333">+</span> node1);
  }
  <span style="color:#666;font-style:italic">// zistíme index druhého uzla
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#66f;font-weight:bold">int</span> <span style="color:#5ed;font-weight:bold">index2</span> <span style="color:#333">=</span> uzly.<span style="color:#007">indexOf</span>(node2);
  <span style="color:#289;font-weight:bold">if</span>(index2 <span style="color:#333">==</span> <span style="color:#333">-</span>1) {
    <span style="color:#666;font-style:italic">// taký uzol neexistuje!
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#289;font-weight:bold">throw</span> <span style="color:#289;font-weight:bold">new</span> IllegalArgumentException(<span style="background-color:#e0e0ff">&#34;Uzol v grafe neexistuje! &#34;</span> <span style="color:#333">+</span> node2);
  }   
  <span style="color:#666;font-style:italic">// na index1-tom zozname nastavíme hodnotu na pozícii index2 na true
</span><span style="color:#666;font-style:italic"></span>  matica.<span style="color:#007">get</span>(index1).<span style="color:#007">set</span>(index2, <span style="color:#289;font-weight:bold">true</span>);
  <span style="color:#666;font-style:italic">// pre neorientovane hrany tiez matica.get(index2).set(index1, true);
</span><span style="color:#666;font-style:italic"></span>}</code></pre></div>
<h1 id="algoritmus-topologického-triedenia-na-matici-incidencií">Algoritmus topologického triedenia na matici incidencií</h1>

<h2 id="topologické-triedenie">Topologické triedenie</h2>

<p>V predošlom článku sme spomínali pekný algoritmus riešiaci problém
správneho poradia pri zápise predmetov v študijnom programe
nazývaný <em>topologické triedenie</em>.</p>

<p>Algoritmus bol jednoduchý:</p>

<ol>
<li>nájdime v grafe uzol bez predchodcov, vypíšme ho. Ak uzol nejestvuje, končíme.</li>
<li>prejdime zoznam jeho nasledovníkov. Každému nasledovníkovi znížme počet predchodcov o 1&hellip;</li>
<li>&hellip; pretože tento uzol bez predchodcov z grafu vyhodíme.</li>
<li>prejdime na krok 1.</li>
</ol>

<p>Samotná implementácia v Jave zodpovedá priamo algoritmu:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">void</span> topologickeTriedenie() {
  Uzol <span style="color:#5ed;font-weight:bold">uzolBezPredchodcov</span> <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">null</span>;
  <span style="color:#289;font-weight:bold">while</span>((uzolBezPredchodcov <span style="color:#333">=</span> hľadajUzolBezPredchodcov()) <span style="color:#333">!=</span> <span style="color:#289;font-weight:bold">null</span>) {
    System.<span style="color:#007">out</span>.<span style="color:#007">println</span>(uzolBezPredchodcov);
    odstráňUzol(uzolBezPredchodcov);     
  }
  <span style="color:#289;font-weight:bold">if</span>(<span style="color:#333">!</span>uzly.<span style="color:#007">isEmpty</span>()) {
    <span style="color:#289;font-weight:bold">throw</span> <span style="color:#289;font-weight:bold">new</span> IllegalStateException(<span style="background-color:#e0e0ff">&#34;V grafe sú cykly.&#34;</span>);
  }
}</code></pre></div>
<p>Metóda <code>hľadajUzolBezPredchodcov()</code> nájde v grafe uzol, ktorý nemá predchodcov,
teda v matici incidencie má príslušný stĺpec bez značiek (teda sú v ňom samé
hodnoty <code>false</code>). V predošlej ukážkovej tabuľke máme dva uzly bez predchodcov: ich indexy
sú 0 a 7.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#666;font-style:italic">// ideme &#34;po stlpcoch&#34; v matici. Pre kazdy stlpec pozrieme,
</span><span style="color:#666;font-style:italic">// ci v nom je *true* prvok. Ak ano, znamena
</span><span style="color:#666;font-style:italic">// vchadzajucu hranu a teda predka. Ak nie,
</span><span style="color:#666;font-style:italic">// mame uzol bez predchodcov, ktory vratime.
</span><span style="color:#666;font-style:italic"></span><span style="color:#289;font-weight:bold">for</span> (<span style="color:#66f;font-weight:bold">int</span> <span style="color:#5ed;font-weight:bold">i</span> <span style="color:#333">=</span> 0; i <span style="color:#333">&lt;</span> uzly.<span style="color:#007">size</span>(); i<span style="color:#333">++</span>) {
  <span style="color:#66f;font-weight:bold">boolean</span> <span style="color:#5ed;font-weight:bold">máPredchodcov</span> <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">false</span>;
  <span style="color:#289;font-weight:bold">for</span> (List<span style="color:#333">&lt;</span>Boolean<span style="color:#333">&gt;</span> <span style="color:#5ed;font-weight:bold">riadok</span> <span style="color:#333">:</span> matica) {
    <span style="color:#289;font-weight:bold">if</span>(riadok.<span style="color:#007">get</span>(i) <span style="color:#333">==</span> <span style="color:#289;font-weight:bold">true</span>) {
      <span style="color:#666;font-style:italic">// staci napisat if(riadok.get(i)) {
</span><span style="color:#666;font-style:italic"></span>      máPredchodcov <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">true</span>;
      <span style="color:#289;font-weight:bold">break</span>;
    }
  }
  <span style="color:#289;font-weight:bold">if</span>(<span style="color:#333">!</span>máPredchodcov) {
    <span style="color:#666;font-style:italic">// v i-tom stlpci je uzol bez predka, 
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#666;font-style:italic">// dohladame v zozname uzlov prislusny objekt 
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#666;font-style:italic">// Uzol a vratime ho
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#289;font-weight:bold">return</span> uzly.<span style="color:#007">get</span>(i);
  }
}
<span style="color:#289;font-weight:bold">return</span> <span style="color:#289;font-weight:bold">null</span>;</code></pre></div>
<p>Metóda <code>odstráňUzol()</code>, ktorá odstraňuje uzol z grafu, už bola popísaná
vyššie.</p>

<h2 id="budovanie-štruktúry">Budovanie štruktúry</h2>

<p>Vybudovanie grafu pre topologické triedenie je tiež veľmi podobné klasickému
prístupu popísanému minule. Ak načítavame dvojice <em>prerekvizita</em> -<em>predmet</em>
zo súboru, metóda <code>pridajDvojicu()</code> vyzerá nasledovne:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">public</span> <span style="color:#5ed;font-weight:bold">void</span> pridajDvojicu(String <span style="color:#5ed;font-weight:bold">prerekvizita</span>, String <span style="color:#5ed;font-weight:bold">predmet</span>) {
  <span style="color:#666;font-style:italic">// nájdi v grafe prvý uzol
</span><span style="color:#666;font-style:italic"></span>  Uzol <span style="color:#5ed;font-weight:bold">uzolPrerekvizity</span> <span style="color:#333">=</span> hľadajPodľaNázvu(prerekvizita);
  <span style="color:#666;font-style:italic">// ak prvý uzol nejestvuje, vytvor ho a pridaj do grafu
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">if</span>(uzolPrerekvizity <span style="color:#333">==</span> <span style="color:#289;font-weight:bold">null</span>) {
    uzolPrerekvizity <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">new</span> Uzol(prerekvizita);
    pridajUzol(uzolPrerekvizity);
  }
  <span style="color:#666;font-style:italic">// nájdi v grafe druhý uzol
</span><span style="color:#666;font-style:italic"></span>  Uzol <span style="color:#5ed;font-weight:bold">uzolPredmetu</span> <span style="color:#333">=</span> hľadajPodľaNázvu(predmet);
  <span style="color:#666;font-style:italic">// ak druhý uzol nejestvuje, vytvor a pridaj ho do grafu
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">if</span>(uzolPredmetu <span style="color:#333">==</span> <span style="color:#289;font-weight:bold">null</span>) {
    uzolPredmetu <span style="color:#333">=</span> <span style="color:#289;font-weight:bold">new</span> Uzol(predmet);
    pridajUzol(uzolPredmetu);
  }

  pridajHranu(uzolPrerekvizity, uzolPredmetu);
}</code></pre></div>
<p>Metóda na hľadanie uzla podľa názvu je úplne rovnaká
ako v prípade vlastnej štruktúry - stačí prejsť zoznam
uzlov a nájsť ten požadovaný.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#289;font-weight:bold">protected</span> <span style="color:#5ed;font-weight:bold">Uzol</span> hľadajPodľaNázvu(String <span style="color:#5ed;font-weight:bold">nazov</span>) {
  <span style="color:#666;font-style:italic">// prechádzame zoznam uzlov
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">for</span> (Uzol <span style="color:#5ed;font-weight:bold">uzol</span> <span style="color:#333">:</span> uzly) {
    <span style="color:#666;font-style:italic">// ak sme našli uzol, končíme
</span><span style="color:#666;font-style:italic"></span>    <span style="color:#289;font-weight:bold">if</span>(uzol.<span style="color:#007">getNazov</span>().<span style="color:#007">equals</span>(nazov)) {
      <span style="color:#289;font-weight:bold">return</span> uzol;
    }
  }
  <span style="color:#666;font-style:italic">// uzol sme nenašli, vraciame null
</span><span style="color:#666;font-style:italic"></span>  <span style="color:#289;font-weight:bold">return</span> <span style="color:#289;font-weight:bold">null</span>;
}</code></pre></div>
</main>

    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
    </footer>
  </body>
</html>

